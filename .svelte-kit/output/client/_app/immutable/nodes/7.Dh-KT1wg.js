import{f as ut}from"../chunks/B4KIXfoe.js";import"../chunks/DsnmJJEf.js";import"../chunks/KrGMG5d4.js";import{o as St}from"../chunks/DN-rPOIK.js";import{p as At,m as G,ay as Wt,az as Dt,f as S,a as Rt,G as M,b as N,c as jt,s as r,e as a,h as B,g as t,r as s,n as $,u as i,J as It}from"../chunks/C0ys7KY4.js";import{s as d}from"../chunks/ClEjLSVY.js";import{s as L}from"../chunks/CauDJsBl.js";import{s as mt}from"../chunks/CrX52mly.js";import{i as Et}from"../chunks/CALS168o.js";import{p as Tt}from"../chunks/CuUo-GuR.js";import{P as W}from"../chunks/CBS-fKD7.js";const Bt=async()=>{const E=await ut();return{w:E.weather,connected:E.connected,source:E.source}},ie=Object.freeze(Object.defineProperty({__proto__:null,load:Bt},Symbol.toStringTag,{value:"Module"}));var Lt=S('<div class="grid grid-cols-2 gap-4"><div><div class="text-muted mb-1 text-xs">Temperature</div> <div class="text-3xl font-semibold"> <span class="align-top text-base">°C</span></div> <div class="text-muted mt-1 text-xs"> </div> <div class="text-muted mt-1 text-xs">↗ 12.7 °C ↘ 4.9 °C</div> <div class="text-accent mt-1 text-xs"> </div></div> <div><div class="text-muted mb-1 text-xs">Humidity</div> <div class="text-3xl font-semibold"> <span class="align-top text-base">%</span></div> <div class="text-muted mt-1 text-xs"> </div> <div class="text-muted mt-1 text-xs"> </div></div></div>'),Ot=S('<div class="grid grid-cols-2 gap-4"><div><div class="text-muted mb-1 text-xs">Temperature</div> <div class="text-3xl font-semibold"> <span class="align-top text-base">°C</span></div> <div class="text-muted mt-1 text-xs"> </div> <div class="text-muted mt-1 text-xs">↗ 14.6 °C ↘ 11.6 °C</div></div> <div><div class="text-muted mb-1 text-xs">Humidity</div> <div class="text-3xl font-semibold"> <span class="align-top text-base">%</span></div> <div class="text-muted mt-1 text-xs">↗ 64 % ↘ 56 %</div></div></div>'),zt=S('<div class="grid grid-cols-2 gap-4"><div><div class="text-muted text-xs"> </div> <div class="mt-2"><div class="text-muted mb-1 text-xs">Solar</div> <div class="text-3xl font-semibold"> <span class="align-top text-base">W/m²</span></div> <div class="text-muted mt-1 text-xs">↗ 828.9 W/m²</div></div></div> <div><div class="text-muted mb-1 text-xs">UVI</div> <div class="text-3xl font-semibold"> </div> <div class="text-muted mt-4 text-xs"> </div> <div class="text-muted text-xs"> </div></div></div>'),Ft=S('<div class="grid grid-cols-2 gap-4"><div><div class="text-muted mb-1 text-xs">Rain Rate /hr</div> <div class="text-3xl font-semibold"> <span class="align-top text-base">mm</span></div> <div class="text-muted mt-2 text-xs"> </div></div> <div class="text-muted space-y-1 text-xs"><div>Event <span class="text-green-400"> </span></div> <div> </div> <div> </div> <div> </div> <div> </div></div></div>'),Gt=S('<div class="grid grid-cols-3 items-center gap-4"><div class="col-span-2 flex items-center justify-center"><svg viewBox="0 0 120 120" class="h-52 w-52"><circle cx="60" cy="60" r="54" class="stroke-border fill-transparent" stroke-width="2"></circle><text x="60" y="64" text-anchor="middle" class="fill-white text-3xl font-semibold"> </text><text x="60" y="84" text-anchor="middle" class="fill-muted text-xs"> </text><g><polygon points="60,12 56,24 64,24" class="fill-accent"></polygon></g></svg></div> <div class="text-muted text-sm"><div class="text-lg font-semibold text-white"> </div> <div> <span class="text-xs"> </span></div> <div class="mt-2 text-lg font-semibold text-white"> </div> <div> <span class="text-xs"> </span></div></div></div>'),Ht=S('<div class="grid grid-cols-2 gap-4"><div><div class="text-muted mb-1 text-xs">Relative</div> <div class="text-3xl font-semibold"> <span class="align-top text-base">hPa</span></div> <div class="text-muted mt-1 text-xs"> </div> <div class="text-muted mt-1 text-xs">↗ 994.2 hPa ↘ 990.1 hPa</div></div> <div><div class="text-muted mb-1 text-xs">Absolute</div> <div class="text-3xl font-semibold"> <span class="align-top text-base">hPa</span></div> <div class="text-muted mt-1 text-xs"> </div> <div class="text-muted mt-1 text-xs">↗ 994.2 hPa ↘ 990.1 hPa</div></div></div>'),Ut=S('<div class="text-sm"><div class="font-semibold text-green-400"> </div> <div class="text-muted"> </div></div>'),Vt=S('<div class="overflow-x-auto"><svg viewBox="0 0 800 240" class="h-64 w-full"><defs><clipPath id="clip"><rect x="40" y="20" width="740" height="180"></rect></clipPath></defs><g><text x="10" y="30" class="fill-muted text-xs">Temp</text><text x="10" y="50" class="fill-muted text-xs">Feels</text><text x="10" y="70" class="fill-muted text-xs">Dew</text></g><g clip-path="url(#clip)"><polyline fill="none" stroke="#facc15" stroke-width="2"></polyline><polyline fill="none" stroke="#3b82f6" stroke-width="2"></polyline><polyline fill="none" stroke="#22c55e" stroke-width="2"></polyline></g><g class="text-muted"><line x1="40" y1="200" x2="780" y2="200" stroke="currentColor" stroke-opacity="0.3"></line><text x="782" y="204" class="fill-muted text-xs">0</text></g></svg></div>'),qt=S('<header class="container mx-auto flex items-center justify-between gap-4 px-4 py-4"><a href="/" class="text-muted text-sm hover:text-white">&larr; Back to home</a> <div class="flex items-center gap-3 text-xs"><div class="text-muted"> </div> <span><span></span> </span></div></header> <main class="container mx-auto space-y-5 px-4 pb-8"><div class="grid gap-4 lg:grid-cols-3 xl:grid-cols-4"><a href="/weather/outdoor" class="block transform transition hover:scale-105"><!></a> <a href="/weather/indoor" class="block transform transition hover:scale-105"><!></a> <a href="/weather/solar" class="block transform transition hover:scale-105"><!></a> <a href="/weather/rain" class="block transform transition hover:scale-105"><!></a> <a href="/weather/wind" class="block transform transition hover:scale-105 xl:col-span-2"><!></a> <a href="/weather/pressure" class="block transform transition hover:scale-105"><!></a> <a href="/weather/battery" class="block transform transition hover:scale-105"><!></a></div> <!></main>',1);function de(E,it){At(it,!1);const dt=G();let O=Tt(it,"data",8),e=G({...O().w,updatedAt:new Date(O().w.updatedAt)});const _t=()=>new Date;function c(x,w=1){return x.toFixed(w)}function z(x){return x>0?"↑":x<0?"↓":"→"}let vt=G(0),D=G(!O().connected),pt=O().source;St(()=>{const x=setInterval(()=>{B(vt,Math.floor((_t().getTime()-t(e).updatedAt.getTime())/1e3))},1e3),w=setInterval(async()=>{try{const v=await ut();B(e,{...v.weather,updatedAt:new Date(v.weather.updatedAt)}),B(D,!v.connected),pt=v.source}catch{B(D,!0)}},15e3);return()=>{clearInterval(x),clearInterval(w)}});const H=x=>40+x/47*740,U=x=>200-x/14*180;Wt(()=>{},()=>{B(dt,"Daily")}),Dt(),Et();var lt=qt(),V=Rt(lt),ot=r(a(V),2),q=a(ot),ft=a(q);s(q);var F=r(q,2),nt=a(F),ht=r(nt);s(F),s(ot),s(V);var xt=r(V,2),J=a(xt),Y=a(J),gt=a(Y);W(gt,{title:"Outdoor",className:"h-full",children:(x,w)=>{var v=Lt(),l=a(v),n=r(a(l),2),u=a(n,!0);$(),s(n);var m=r(n,2),f=a(m);s(m);var h=r(m,4),o=a(h);s(h),s(l);var _=r(l,2),p=r(a(_),2),g=a(p,!0);$(),s(p);var b=r(p,2),y=a(b);s(b);var k=r(b,2),P=a(k);s(k),s(_),s(v),M((C,A,R,j,I,T)=>{d(u,C),d(f,`${A??""}
							${R??""} °C/hr`),d(o,`VPD ${j??""} kPa`),d(g,(t(e),i(()=>t(e).outdoor.humidity))),d(y,`Feels Like ${I??""} °C`),d(P,`Dew Point ${T??""} °C`)},[()=>(t(e),i(()=>c(t(e).outdoor.temp))),()=>(t(e),i(()=>z(t(e).outdoor.trend))),()=>(t(e),i(()=>c(Math.abs(t(e).outdoor.trend)))),()=>(t(e),i(()=>c(t(e).outdoor.vpd,3))),()=>(t(e),i(()=>c(t(e).outdoor.feelsLike))),()=>(t(e),i(()=>c(t(e).outdoor.dewPoint)))]),N(x,v)},$$slots:{default:!0}}),s(Y);var K=r(Y,2),bt=a(K);W(bt,{title:"Indoor",className:"h-full",children:(x,w)=>{var v=Ot(),l=a(v),n=r(a(l),2),u=a(n,!0);$(),s(n);var m=r(n,2),f=a(m);s(m),$(2),s(l);var h=r(l,2),o=r(a(h),2),_=a(o,!0);$(),s(o),$(2),s(h),s(v),M((p,g,b)=>{d(u,p),d(f,`${g??""}
							${b??""} °C/hr`),d(_,(t(e),i(()=>t(e).indoor.humidity)))},[()=>(t(e),i(()=>c(t(e).indoor.temp))),()=>(t(e),i(()=>z(t(e).indoor.trend))),()=>(t(e),i(()=>c(Math.abs(t(e).indoor.trend))))]),N(x,v)},$$slots:{default:!0}}),s(K);var Q=r(K,2),$t=a(Q);W($t,{title:"Solar and UVI",className:"h-full",children:(x,w)=>{var v=zt(),l=a(v),n=a(l),u=a(n,!0);s(n);var m=r(n,2),f=r(a(m),2),h=a(f,!0);$(),s(f),$(2),s(m),s(l);var o=r(l,2),_=r(a(o),2),p=a(_,!0);s(_);var g=r(_,2),b=a(g);s(g);var y=r(g,2),k=a(y);s(y),s(o),s(v),M(P=>{d(u,(t(e),i(()=>t(e).solar.moon))),d(h,P),d(p,(t(e),i(()=>t(e).solar.uvi))),d(b,`☀ Sun Rise ${t(e),i(()=>t(e).solar.sunrise)??""}`),d(k,`☀ Sun Set ${t(e),i(()=>t(e).solar.sunset)??""}`)},[()=>(t(e),i(()=>c(t(e).solar.solar)))]),N(x,v)},$$slots:{default:!0}}),s(Q);var X=r(Q,2),yt=a(X);W(yt,{title:"Rainfall",className:"h-full",children:(x,w)=>{var v=Ft(),l=a(v),n=r(a(l),2),u=a(n,!0);$(),s(n);var m=r(n,2),f=a(m);s(m),s(l);var h=r(l,2),o=a(h),_=r(a(o)),p=a(_);s(_),s(o);var g=r(o,2),b=a(g);s(g);var y=r(g,2),k=a(y);s(y);var P=r(y,2),C=a(P);s(P);var A=r(P,2),R=a(A);s(A),s(h),s(v),M((j,I,T,et,at,st,rt)=>{d(u,j),d(f,`Daily ${I??""} mm`),d(p,`${T??""} mm`),d(b,`Hourly ${et??""} mm`),d(k,`Weekly ${at??""} mm`),d(C,`Monthly ${st??""} mm`),d(R,`Yearly ${rt??""} mm`)},[()=>(t(e),i(()=>c(t(e).rain.rate))),()=>(t(e),i(()=>c(t(e).rain.daily))),()=>(t(e),i(()=>c(t(e).rain.event))),()=>(t(e),i(()=>c(t(e).rain.hourly))),()=>(t(e),i(()=>c(t(e).rain.weekly))),()=>(t(e),i(()=>c(t(e).rain.monthly))),()=>(t(e),i(()=>c(t(e).rain.yearly)))]),N(x,v)},$$slots:{default:!0}}),s(X);var Z=r(X,2),wt=a(Z);W(wt,{title:"Wind",className:"h-full",children:(x,w)=>{var v=Gt(),l=a(v),n=a(l),u=r(a(n)),m=a(u,!0);s(u);var f=r(u),h=a(f,!0);s(f);var o=r(f);s(n),s(l);var _=r(l,2),p=a(_),g=a(p);s(p);var b=r(p,2),y=a(b),k=r(y),P=a(k,!0);s(k),s(b);var C=r(b,2),A=a(C);s(C);var R=r(C,2),j=a(R),I=r(j),T=a(I,!0);s(I),s(R),s(_),s(v),M((et,at,st,rt,Mt,Nt)=>{d(m,et),d(h,at),L(o,"transform",(t(e),i(()=>`rotate(${t(e).wind.dir} 60 60)`))),d(g,`Wind ${st??""} m/s`),d(y,`↗ ${rt??""} km/h `),d(P,(t(e),i(()=>t(e).wind.timeSpeed))),d(A,`Gust ${Mt??""} m/s`),d(j,`↗ ${Nt??""} km/h `),d(T,(t(e),i(()=>t(e).wind.timeGust)))},[()=>(t(e),i(()=>Math.round(t(e).wind.dir))),()=>(t(e),i(()=>["N","NE","E","SE","S","SW","W","NW"][Math.round((t(e).wind.dir%360+22.5)/45)%8])),()=>(t(e),i(()=>c(t(e).wind.speed))),()=>(t(e),i(()=>c(t(e).wind.speed*3.6))),()=>(t(e),i(()=>c(t(e).wind.gust))),()=>(t(e),i(()=>c(t(e).wind.gust*3.6)))]),N(x,v)},$$slots:{default:!0}}),s(Z);var tt=r(Z,2),kt=a(tt);W(kt,{title:"Pressure",className:"h-full",children:(x,w)=>{var v=Ht(),l=a(v),n=r(a(l),2),u=a(n,!0);$(),s(n);var m=r(n,2),f=a(m);s(m),$(2),s(l);var h=r(l,2),o=r(a(h),2),_=a(o,!0);$(),s(o);var p=r(o,2),g=a(p);s(p),$(2),s(h),s(v),M((b,y,k,P,C,A)=>{d(u,b),d(f,`${y??""}
							${k??""} hPa`),d(_,P),d(g,`${C??""}
							${A??""} hPa`)},[()=>(t(e),i(()=>c(t(e).pressure.rel,1))),()=>(t(e),i(()=>z(t(e).pressure.deltaRel))),()=>(t(e),i(()=>c(Math.abs(t(e).pressure.deltaRel),1))),()=>(t(e),i(()=>c(t(e).pressure.abs,1))),()=>(t(e),i(()=>z(t(e).pressure.deltaAbs))),()=>(t(e),i(()=>c(Math.abs(t(e).pressure.deltaAbs),1)))]),N(x,v)},$$slots:{default:!0}}),s(tt);var ct=r(tt,2),Pt=a(ct);W(Pt,{title:"Battery",className:"h-full",children:(x,w)=>{var v=Ut(),l=a(v),n=a(l,!0);s(l);var u=r(l,2),m=a(u,!0);s(u),s(v),M(()=>{d(n,(t(e),i(()=>t(e).battery.status))),d(m,(t(e),i(()=>t(e).battery.note)))}),N(x,v)},$$slots:{default:!0}}),s(ct),s(J);var Ct=r(J,2);{let x=It(()=>`Outdoor — ${t(dt)}`);W(Ct,{get title(){return t(x)},className:"",children:(w,v)=>{var l=Vt(),n=a(l),u=r(a(n),2),m=a(u),f=r(m),h=r(f);s(u),$(),s(n),s(l),M((o,_,p)=>{L(m,"points",o),L(f,"points",_),L(h,"points",p)},[()=>(t(e),i(()=>t(e).series.map(o=>`${H(o.t)},${U(o.temp)}`).join(" "))),()=>(t(e),i(()=>t(e).series.map(o=>`${H(o.t)},${U(o.feels)}`).join(" "))),()=>(t(e),i(()=>t(e).series.map(o=>`${H(o.t)},${U(o.dew)}`).join(" ")))]),N(w,l)},$$slots:{default:!0}})}s(xt),M(()=>{d(ft,`Reported ${t(vt)??""}s ago`),mt(F,1,`inline-flex items-center gap-1 rounded-full border px-2 py-0.5 ${t(D)?"border-red-400/40 bg-red-400/10 text-red-300":"border-green-400/40 bg-green-400/10 text-green-300"}`),L(F,"title",t(D)?"Using mock data":"Connected to Ecowitt"),mt(nt,1,`size-1.5 rounded-full ${t(D)?"bg-red-400":"bg-green-400"}`),d(ht,` ${t(D)?"Mock":"Live (Ecowitt)"}`)}),N(E,lt),jt()}export{de as component,ie as universal};
